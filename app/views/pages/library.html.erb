<% prompt = "Write an argument explaining whether or not your elementary school should have a gifted and talented program." %>

<p>
  Please use the source library below to research information to respond to the following prompt:
</p>

<div class="alert alert-info">
  <h4>
    <%= prompt %>
  </h4>

  <p>
    In researching information for your argument, please consider where the informtaion you're using comes from and who wrote it. 
  </p>
</div>

<br>

<% @sources.in_groups_of(3).each do |row| %>
  <div class="row">
    <% row.each do |source_array| %>
    <div class="col-md-4">
      <%= link_to source_array[0], "#", :class => "btn btn-lg btn-success btn-block source-btn", :id => source_array[1],
        :data => { 
          :toggle => "modal", :target => "##{source_array[1]}_modal", :backdrop => "static", :keyboard => false
        } %>
      <br>
      <br>
    </div>
    <% end %>
  </div>
<% end %>

<div class="row">
  <div class="col-md-4 col-md-offset-4">
    <%= link_to "Click here to continue", "#", :class => "btn btn-lg btn-primary btn-block",
    :data => { :toggle => "modal", :target => "#continue_modal", :backdrop => "static", :keyboard => false } %>
  </div>
</div>

<!-- Modals -->

<% @sources.each do |source| %>
  <%= content_tag :div, :class => "modal source_modal fade", 
    :id => "#{source[1]}_modal", :data => { :name => source[0] } do %>
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close source_modal_close" aria-hidden="true">&times;</button>
          <h4 class="modal-title">
            <%= source[0] %>
          </h4>
        </div>
        <div class="modal-body">
          <p>
            <%= link_to "Click here to learn more about this source", "#", :class => "more_source_info" %>
          </p>

          <%= render "sources/#{source[1]}" %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default source_modal_close">Back to Library</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  <% end %>
<% end %>

<!-- Source Evaluation Modal -->

<%= content_tag :div, :class => "modal fade", :id => "source_evaluation_modal" do %>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close source_evaluation_modal_close" aria-hidden="true">&times;</button>
        <h4 class="modal-title">
          Source Evaluation
        </h4>
      </div>
      <div class="modal-body">
        <div class="alert alert-info">
          Please rate this source:
        </div>

        <p class="instructions">How <strong>trustworthy</strong> was this source?</p>
        <%= render "shared/mm_line", :num => 50 %>
        <p class="instructions">How <strong>persuasive</strong> was this source?</p>
        <%= render "shared/mm_line", :num => 50 %>
        <p class="instructions">How <strong>convincing</strong> was this source?</p>
        <%= render "shared/mm_line", :num => 50 %>
        <p class="instructions">How <strong>credible</strong> was this source?</p>
        <%= render "shared/mm_line", :num => 50 %>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default source_evaluation_modal_close">Back to Library</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
<% end %>

<!-- Stance Radio Button Modal -->

<%= content_tag :div, :class => "modal fade", :id => "continue_modal" do %>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">
          <%= prompt %>
        </h4>
      </div>
      <%= form_for @stance, :html => { :id => "stance_form" } do |f| %>
        <div class="modal-body">

          <%= f.radio_button :supporting, 0 %>
          <%= f.label :supporting, "Yes, my school should have a gifted and talented program", :value => 0 %>
          <br>
          <%= f.radio_button :supporting, 1 %>
          <%= f.label :supporting, "No, my school should not have a gifted and talented program", :value => 1 %>
          <br>
          <%= f.radio_button :supporting, 2 %>
          <%= f.label :supporting, "Other", :value => 2 %>
          <br><br>
          <%= f.text_area :statement, :class => "form-control", :rows => 5, 
            :placeholder => "Please write an arugment explaining why your elementary school should or should not have a gifted and talented program.  Please be sure to use specific information from the sources provided to support your argument." %>

        </div>
        <div class="modal-footer">
          <%= f.submit "Continue", :class => "btn btn-primary" %>
        </div>
      <% end %>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
<% end %>
